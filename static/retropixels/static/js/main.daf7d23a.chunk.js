(this["webpackJsonpretropixels-web"]=this["webpackJsonpretropixels-web"]||[]).push([[0],{226:function(e,t,a){},227:function(e,t,a){},269:function(e,t){},271:function(e,t){},516:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(23),r=a.n(i),o=(a(226),a(10)),s=a(553),j=a(559),d=(a(227),a(556)),u=a(557),l=a(213),b=a(120),h=a.n(b),O=a(563),f=a(560),m=a(4);var p=function(e){var t=e.onload,a=Object(n.useState)(void 0),c=Object(o.a)(a,2),i=c[0],r=c[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.a,{onChange:function(e){e.forEach((function(e){return function(e){var a=new FileReader;a.onabort=function(){return r("file reading was aborted")},a.onerror=function(){return r("file reading has failed")},a.onload=function(){h.a.read(a.result).then((function(e){r(void 0),t(e)})).catch((function(e){r(e.message)}))},a.readAsArrayBuffer(e)}(e)}))},acceptedFiles:["image/*"],filesLimit:1,showPreviewsInDropzone:!1,dropzoneText:"Drag and drop an image here or click"}),Object(m.jsx)(O.a,{open:i,autoHideDuration:6e3,onClose:function(){return r(void 0)},children:Object(m.jsx)(f.a,{severity:"error",children:i})})]})};function x(e){var t=c.a.useRef(null),a=e.width,i=e.height,r=e.imageData;return Object(n.useEffect)((function(){void 0!==r&&t.current.getContext("2d").putImageData(r,0,0)}),[r]),Object(m.jsx)("canvas",{ref:t,width:a,height:i})}x.defaultProps={imageData:void 0};var g=x,v=a(24);function C(e){if(void 0!==e){var t,a=e.bitmap.width*e.bitmap.height*4;return t=e.bitmap.data.length>a?e.bitmap.data.slice(0,a):e.bitmap.data,void 0!==e?new ImageData(Uint8ClampedArray.from(t),e.bitmap.width,e.bitmap.height):void 0}}var w=function(e){var t=e.onChanged,a=Object(n.useState)(void 0),c=Object(o.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(void 0),j=Object(o.a)(s,2),l=j[0],b=j[1];return Object(n.useEffect)((function(){t(i),b(C(i))}),[i,t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"input"}),Object(m.jsx)(d.a,{children:Object(m.jsx)(g,{width:320,height:200,imageData:l})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(p,{onload:function(e){return function(e){var t=e.clone();t.cover(320,200),r(t)}(e)}})})]})},I=a(558),S=a(562),y=a(517),D=a(568),E=a(561),z=a(567),k=a(565),F=a(566);function P(e){var t=e.label,a=e.initialValue,c=e.items,i=e.onChange,r=Object(n.useState)(a),s=Object(o.a)(r,2),j=s[0],d=s[1];return Object(n.useEffect)((function(){i(j)}),[j,i]),Object(m.jsxs)(k.a,{component:"fieldset",children:[Object(m.jsx)(F.a,{component:"legend",children:t}),Object(m.jsx)(z.a,{"aria-label":t,name:"select".concat(t),value:j,onChange:function(e){d(e.target.value)},children:c.map((function(e){return Object(m.jsx)(I.a,{value:e,control:Object(m.jsx)(E.a,{}),label:e})}))})]})}P.defaultProps={label:"Choose"};var B=P;function A(e){var t=e.jimpImage,a=e.onChanged,c=Object(n.useState)(void 0),i=Object(o.a)(c,2),r=i[0],s=i[1],j=Object(n.useState)(void 0),l=Object(o.a)(j,2),b=l[0],h=l[1],O=Object(n.useState)(!0),f=Object(o.a)(O,2),p=f[0],x=f[1],v=Object(n.useState)(0),w=Object(o.a)(v,2),E=w[0],z=w[1];return Object(n.useEffect)((function(){a(r),h(C(r))}),[r,a]),Object(n.useEffect)((function(){if(void 0!==t){var e=t.clone();p&&e.normalize(),e.color([{apply:"brighten",params:[E]}]),s(e)}}),[t,p,E]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"pre-processing"}),Object(m.jsx)(d.a,{children:Object(m.jsx)(g,{width:320,height:200,imageData:b})}),Object(m.jsxs)(u.a,{children:[Object(m.jsx)(I.a,{control:Object(m.jsx)(S.a,{checked:p,onChange:function(){x(!p)},name:"normalizeCheckbox"}),label:"Normalize"}),Object(m.jsx)(y.a,{gutterBottom:!0,children:"Brighten"}),Object(m.jsx)(D.a,{min:0,max:100,value:E,onChange:function(e,t){return z(t)},valueLabelDisplay:"on"})]})]})}A.defaultProps={jimpImage:void 0};var W=A;var L=function(e){var t=e.onChange,a=Object(n.useState)(!1),c=Object(o.a)(a,2),i=c[0],r=c[1];return Object(n.useEffect)((function(){t(i)}),[i]),Object(m.jsx)(I.a,{control:Object(m.jsx)(S.a,{checked:i,onChange:function(){r(!i)},name:"hiresCheckbox"}),label:"Hires"})},R=a(555),V=a(60),N=a.n(V),T=a(212),H=a.n(T),J=a(211);function M(e){var t,a=v.GraphicModes.all.bitmap,c=e.jimpImage,i=e.hires,r=e.colorspaceId,s=e.paletteId,j=e.ditherId,d=e.ditherRadius,u=new v.Quantizer(v.Palettes.all[s],v.ColorSpaces.all[r]),l=new v.Converter(u),b=new N.a(N.a.presets[j],d),h=Object(n.useState)(void 0),O=Object(o.a)(h,2),f=O[0],p=O[1],x=Object(n.useState)(void 0),C=Object(o.a)(x,2),w=C[0],I=C[1],S=Object(n.useState)(u),y=Object(o.a)(S,2),D=y[0],E=y[1],z=Object(n.useState)(l),k=Object(o.a)(z,2),F=k[0],P=k[1],B=Object(n.useState)(b),A=Object(o.a)(B,2),W=A[0],L=A[1];return Object(n.useEffect)((function(){E(new v.Quantizer(v.Palettes.all[s],v.ColorSpaces.all[r]))}),[r,s]),Object(n.useEffect)((function(){P(new v.Converter(D))}),[D]),Object(n.useEffect)((function(){p(a({hires:i}))}),[i,a]),Object(n.useEffect)((function(){L(new N.a(N.a.presets[j],d))}),[j,d]),Object(n.useEffect)((function(){if(void 0!==c){var e=a({hires:i}),t=c.clone();t.resize(e.mode.width,e.mode.height),"none"!==j&&W.dither(t.bitmap),t.opaque(),F.convert(t.bitmap,e),p(e)}}),[c,F,W,i,a]),Object(n.useEffect)((function(){I(function(e){if(void 0===e)return new ImageData(1,1);for(var t=e.mode.width*e.mode.pixelWidth,a=new ImageData(t,e.mode.height),n=0;n<e.mode.height;n++)for(var c=0;c<e.mode.width;c++)for(var i=e.peek(c,n),r=void 0!==i?v.Palettes.all.colodore.get(i):[0,0,0,0],o=0;o<e.mode.pixelWidth;o++){var s=4*n*t+c*e.mode.pixelWidth*4+4*o;a.data[s]=r[0],a.data[s+1]=r[1],a.data[s+2]=r[2],a.data[s+3]=255}return a}(f))}),[f]),void 0!==f&&(t=f.mode.pixelWidth<2?"Art studio":"Koala"),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{width:320,height:200,imageData:w}),";",Object(m.jsxs)(R.a,{variant:"contained",disabled:void 0===f,color:"primary",onClick:function(){return function(){var e=v.C64Writer.toBinary(f),t=v.C64Writer.toBuffer(e),a=new Blob([t],{type:"application/octet-stream"}),n=f.mode.pixelWidth<2?".art":".kla";Object(J.saveAs)(a,"test".concat(n))}()},children:[Object(m.jsx)(H.a,{})," \xa0 Download ",t]})]})}M.defaultProps={jimpImage:void 0,hires:!1,colorspaceId:"xyz",paletteId:"colodore",ditherId:"bayer4x4",ditherRadius:32};var Q=M;function q(e){var t="bayer4x4",a="colodore",c=e.jimpImage,i=Object(n.useState)("xyz"),r=Object(o.a)(i,2),s=r[0],j=r[1],l=Object(n.useState)(a),b=Object(o.a)(l,2),h=b[0],O=b[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),x=p[0],g=p[1],v=Object(n.useState)(t),C=Object(o.a)(v,2),w=C[0],I=C[1],S=Object(n.useState)(32),E=Object(o.a)(S,2),z=E[0],k=E[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"output"}),Object(m.jsx)(d.a,{children:Object(m.jsx)(Q,{jimpImage:c,hires:x,colorspaceId:s,paletteId:h,ditherId:w,ditherRadius:z})}),Object(m.jsxs)(u.a,{children:[Object(m.jsx)(L,{onChange:function(e){return g(e)}}),Object(m.jsx)(B,{label:"colorspace",initialValue:"xyz",items:["rgb","yuv","xyz","rainbow"],onChange:function(e){return j(e)}}),Object(m.jsx)(B,{label:"palette",initialValue:a,items:["colodore","pepto","deekay"],onChange:function(e){return O(e)}}),Object(m.jsx)(B,{label:"dithering",initialValue:t,items:["none","bayer2x2","bayer4x4","bayer8x8"],onChange:function(e){return I(e)}}),Object(m.jsx)(y.a,{gutterBottom:!0,children:"Dither strength"}),Object(m.jsx)(D.a,{disabled:"none"===w,min:0,max:64,value:z,onChange:function(e,t){return k(t)},valueLabelDisplay:"on"})]})]})}q.defaultProps={jimpImage:void 0};var G=q;var K=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(void 0),r=Object(o.a)(i,2),d=r[0],u=r[1];return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("body",{className:"App-body",children:Object(m.jsxs)(s.a,{container:!0,spacing:3,children:[Object(m.jsx)(s.a,{item:!0,component:j.a,xs:!0,children:Object(m.jsx)(w,{onChanged:function(e){return c(e)}})}),Object(m.jsx)(s.a,{item:!0,component:j.a,xs:!0,children:Object(m.jsx)(W,{jimpImage:a,onChanged:function(e){return u(e)}})}),Object(m.jsx)(s.a,{item:!0,component:j.a,xs:!0,children:Object(m.jsx)(G,{jimpImage:d})})]})})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,570)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(K,{})}),document.getElementById("root")),U()}},[[516,1,2]]]);
//# sourceMappingURL=main.daf7d23a.chunk.js.map