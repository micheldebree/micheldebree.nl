(this["webpackJsonpretropixels-web"]=this["webpackJsonpretropixels-web"]||[]).push([[0],{225:function(e,t,a){},226:function(e,t,a){},268:function(e,t){},270:function(e,t){},515:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(23),r=a.n(i),o=(a(225),a(10)),s=a(553),j=(a(226),a(213)),b=a(119),l=a.n(b),u=a(561),d=a(558),h=a(2);var O=function(e){var t=e.onload,a=Object(n.useState)(void 0),c=Object(o.a)(a,2),i=c[0],r=c[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{onChange:function(e){e.forEach((function(e){return function(e){var a=new FileReader;a.onabort=function(){return r("file reading was aborted")},a.onerror=function(){return r("file reading has failed")},a.onload=function(){l.a.read(a.result).then((function(e){r(void 0),t(e)})).catch((function(e){r(e.message)}))},a.readAsArrayBuffer(e)}(e)}))},acceptedFiles:["image/*"],filesLimit:1,showPreviewsInDropzone:!1,dropzoneText:"Drag and drop an image here or click"}),Object(h.jsx)(u.a,{open:i,autoHideDuration:6e3,onClose:function(){return r(void 0)},children:Object(h.jsx)(d.a,{severity:"error",children:i})})]})};function f(e){var t=c.a.useRef(null),a=e.width,i=e.height,r=e.imageData;return Object(n.useEffect)((function(){void 0!==r&&t.current.getContext("2d").putImageData(r,0,0)}),[r]),Object(h.jsx)("canvas",{ref:t,width:a,height:i})}f.defaultProps={imageData:void 0};var m=f,x=a(24);function g(e){if(void 0!==e){var t,a=e.bitmap.width*e.bitmap.height*4;return t=e.bitmap.data.length>a?e.bitmap.data.slice(0,a):e.bitmap.data,void 0!==e?new ImageData(Uint8ClampedArray.from(t),e.bitmap.width,e.bitmap.height):void 0}}var p=function(e){var t=e.onChanged,a=Object(n.useState)(void 0),c=Object(o.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(void 0),j=Object(o.a)(s,2),b=j[0],l=j[1];return Object(n.useEffect)((function(){t(i),l(g(i))}),[i,t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"input"}),Object(h.jsx)(m,{width:320,height:200,imageData:b}),Object(h.jsx)(O,{onload:function(e){return function(e){var t=e.clone();t.cover(320,200),r(t)}(e)}})]})},v=a(556),C=a(557),S=a(560),w=a(516),y=a(563);function I(e){var t=e.jimpImage,a=e.onChanged,c=Object(n.useState)(void 0),i=Object(o.a)(c,2),r=i[0],s=i[1],j=Object(n.useState)(void 0),b=Object(o.a)(j,2),l=b[0],u=b[1],d=Object(n.useState)(!0),O=Object(o.a)(d,2),f=O[0],x=O[1],p=Object(n.useState)(!1),I=Object(o.a)(p,2),k=I[0],D=I[1],E=Object(n.useState)(!1),z=Object(o.a)(E,2),F=z[0],B=z[1],P=Object(n.useState)(!1),A=Object(o.a)(P,2),L=A[0],W=A[1],V=Object(n.useState)(!1),R=Object(o.a)(V,2),H=R[0],N=R[1],T=Object(n.useState)(0),G=Object(o.a)(T,2),J=G[0],M=G[1],Q=Object(n.useState)(0),q=Object(o.a)(Q,2),K=q[0],U=q[1],X=Object(n.useState)(0),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1];return Object(n.useEffect)((function(){a(r),u(g(r))}),[r,a]),Object(n.useEffect)((function(){if(void 0!==t){var e=t.clone();k&&e.greyscale(),f&&e.normalize(),e.brightness(J),e.contrast(K),Z>0&&e.blur(Z),e.mirror(F,L),H&&e.invert(),s(e)}}),[t,f,J,K,k,Z,F,L,H]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"pre-processing"}),Object(h.jsx)(v.a,{children:Object(h.jsx)(m,{width:320,height:200,imageData:l})}),Object(h.jsxs)(v.a,{children:[Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:f,onChange:function(){x(!f)},name:"normalizeCheckbox"}),label:"Normalize"}),Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:k,onChange:function(){D(!k)},name:"greyscaleCheckbox"}),label:"Greyscale"}),Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:H,onChange:function(){N(!H)},name:"invertCheckbox"}),label:"Invert"}),Object(h.jsxs)(v.a,{children:[Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:F,onChange:function(){B(!F)},name:"mirrorHorCheckbox"}),label:"Flip Horizontal"}),Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:L,onChange:function(){W(!L)},name:"mirrorVerCheckbox"}),label:"Flip Vertical"})]}),Object(h.jsx)(w.a,{gutterBottom:!0,children:"Brightness"}),Object(h.jsx)(y.a,{min:-1,max:1,step:.1,value:J,onChange:function(e,t){return M(t)},valueLabelDisplay:"on"}),Object(h.jsx)(w.a,{gutterBottom:!0,children:"Contrast"}),Object(h.jsx)(y.a,{min:-1,max:1,step:.1,value:K,onChange:function(e,t){return U(t)},valueLabelDisplay:"on"}),Object(h.jsx)(w.a,{gutterBottom:!0,children:"Blur"}),Object(h.jsx)(y.a,{min:0,max:10,value:Z,onChange:function(e,t){return $(t)},valueLabelDisplay:"on"})]})]})}I.defaultProps={jimpImage:void 0};var k=I;var D=function(e){var t=e.onChange,a=Object(n.useState)(!1),c=Object(o.a)(a,2),i=c[0],r=c[1];return Object(n.useEffect)((function(){t(i)}),[i]),Object(h.jsx)(C.a,{control:Object(h.jsx)(S.a,{checked:i,onChange:function(){r(!i)},name:"hiresCheckbox"}),label:"Hires"})},E=a(559),z=a(566),F=a(564),B=a(565);function P(e){var t=e.label,a=e.initialValue,c=e.items,i=e.onChange,r=Object(n.useState)(a),s=Object(o.a)(r,2),j=s[0],b=s[1];return Object(n.useEffect)((function(){i(j)}),[j,i]),Object(h.jsxs)(F.a,{component:"fieldset",children:[Object(h.jsx)(B.a,{component:"legend",children:t}),Object(h.jsx)(z.a,{"aria-label":t,name:"select".concat(t),value:j,onChange:function(e){b(e.target.value)},children:c.map((function(e){return Object(h.jsx)(C.a,{value:e,control:Object(h.jsx)(E.a,{}),label:e})}))})]})}P.defaultProps={label:"Choose"};var A=P,L=a(555),W=a(60),V=a.n(W),R=a(212),H=a.n(R),N=a(211);function T(e){var t,a=x.GraphicModes.all.bitmap,c=e.jimpImage,i=e.hires,r=e.colorspaceId,s=e.paletteId,j=e.ditherId,b=e.ditherRadius,l=new x.Quantizer(x.Palettes.all[s],x.ColorSpaces.all[r]),u=new x.Converter(l),d=new V.a(V.a.presets[j],b),O=Object(n.useState)(void 0),f=Object(o.a)(O,2),g=f[0],p=f[1],v=Object(n.useState)(void 0),C=Object(o.a)(v,2),S=C[0],w=C[1],y=Object(n.useState)(l),I=Object(o.a)(y,2),k=I[0],D=I[1],E=Object(n.useState)(u),z=Object(o.a)(E,2),F=z[0],B=z[1],P=Object(n.useState)(d),A=Object(o.a)(P,2),W=A[0],R=A[1];return Object(n.useEffect)((function(){D(new x.Quantizer(x.Palettes.all[s],x.ColorSpaces.all[r]))}),[r,s]),Object(n.useEffect)((function(){B(new x.Converter(k))}),[k]),Object(n.useEffect)((function(){p(a({hires:i}))}),[i,a]),Object(n.useEffect)((function(){R(new V.a(V.a.presets[j],b))}),[j,b]),Object(n.useEffect)((function(){if(void 0!==c){var e=a({hires:i}),t=c.clone();t.resize(e.mode.width,e.mode.height),"none"!==j&&W.dither(t.bitmap),t.opaque(),F.convert(t.bitmap,e),p(e)}}),[c,F,W,i,a]),Object(n.useEffect)((function(){w(function(e){if(void 0===e)return new ImageData(1,1);for(var t=e.mode.width*e.mode.pixelWidth,a=new ImageData(t,e.mode.height),n=0;n<e.mode.height;n++)for(var c=0;c<e.mode.width;c++)for(var i=e.peek(c,n),r=void 0!==i?x.Palettes.all.colodore.get(i):[0,0,0,0],o=0;o<e.mode.pixelWidth;o++){var s=4*n*t+c*e.mode.pixelWidth*4+4*o;a.data[s]=r[0],a.data[s+1]=r[1],a.data[s+2]=r[2],a.data[s+3]=255}return a}(g))}),[g]),void 0!==g&&(t=g.mode.pixelWidth<2?"Art studio":"Koala"),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(m,{width:320,height:200,imageData:S}),Object(h.jsxs)(L.a,{variant:"contained",disabled:void 0===g,color:"primary",onClick:function(){return function(){var e=x.C64Writer.toBinary(g),t=x.C64Writer.toBuffer(e),a=new Blob([t],{type:"application/octet-stream"}),n=g.mode.pixelWidth<2?".art":".kla";Object(N.saveAs)(a,"test".concat(n))}()},children:[Object(h.jsx)(H.a,{})," \xa0 Download ",t]})]})}T.defaultProps={jimpImage:void 0,hires:!1,colorspaceId:"xyz",paletteId:"colodore",ditherId:"bayer4x4",ditherRadius:32};var G=T;function J(e){var t="bayer4x4",a="colodore",c=e.jimpImage,i=Object(n.useState)("xyz"),r=Object(o.a)(i,2),s=r[0],j=r[1],b=Object(n.useState)(a),l=Object(o.a)(b,2),u=l[0],d=l[1],O=Object(n.useState)(!1),f=Object(o.a)(O,2),m=f[0],x=f[1],g=Object(n.useState)(t),p=Object(o.a)(g,2),C=p[0],S=p[1],I=Object(n.useState)(32),k=Object(o.a)(I,2),E=k[0],z=k[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"output"}),Object(h.jsx)(v.a,{children:Object(h.jsx)(G,{jimpImage:c,hires:m,colorspaceId:s,paletteId:u,ditherId:C,ditherRadius:E})}),Object(h.jsx)(v.a,{children:Object(h.jsx)(D,{onChange:function(e){return x(e)}})}),Object(h.jsxs)(v.a,{children:[Object(h.jsx)(A,{label:"colorspace",initialValue:"xyz",items:["rgb","yuv","xyz","rainbow"],onChange:function(e){return j(e)}}),Object(h.jsx)(A,{label:"palette",initialValue:a,items:["colodore","pepto","deekay"],onChange:function(e){return d(e)}}),Object(h.jsx)(A,{label:"dithering",initialValue:t,items:["none","bayer2x2","bayer4x4","bayer8x8"],onChange:function(e){return S(e)}}),Object(h.jsx)(w.a,{gutterBottom:!0,children:"Dither strength"}),Object(h.jsx)(y.a,{disabled:"none"===C,min:0,max:64,value:E,onChange:function(e,t){return z(t)},valueLabelDisplay:"on"})]})]})}J.defaultProps={jimpImage:void 0};var M=J;var Q=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(void 0),r=Object(o.a)(i,2),j=r[0],b=r[1];return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("body",{className:"App-body",children:Object(h.jsxs)(s.a,{container:!0,spacing:3,children:[Object(h.jsx)(s.a,{item:!0,xs:!0,children:Object(h.jsx)(p,{onChanged:function(e){return c(e)}})}),Object(h.jsx)(s.a,{item:!0,xs:!0,children:Object(h.jsx)(k,{jimpImage:a,onChanged:function(e){return b(e)}})}),Object(h.jsx)(s.a,{item:!0,xs:!0,children:Object(h.jsx)(M,{jimpImage:j})})]})})})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,568)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(Q,{})}),document.getElementById("root")),q()}},[[515,1,2]]]);
//# sourceMappingURL=main.80c79e0b.chunk.js.map